import{P as k,r as i,O as e,ah as $,b3 as F,b4 as S,b5 as G,b6 as K,b7 as O,Q as M,R,X as v,b8 as U,b9 as W,aZ as z,a_ as H,a2 as Q,ba as X,ap as Z,W as J,am as V,bb as Y,bc as I,ab as ee,ao as se,bd as L,be as D}from"./index-BapqnFUw.js";import{D as te,I as P}from"./chunk-28-BmcailBo.js";import{A as ae}from"./chunk-13-__CkDkHP.js";const ne="_container_1atqb_6",ce="_header_1atqb_17",re="_headerLeft_1atqb_27",ie="_title_1atqb_33",le="_subtitle_1atqb_40",oe="_headerActions_1atqb_47",de="_infoButton_1atqb_53",me="_backButton_1atqb_54",he="_settingsButton_1atqb_56",_e="_content_1atqb_109",ue="_newsGrid_1atqb_118",pe="_newsCard_1atqb_125",xe="_newsCardImage_1atqb_143",je="_newsCardImagePlaceholder_1atqb_150",ge="_newsCardContent_1atqb_161",we="_newsCardSearchTerm_1atqb_168",Ne="_newsCardTitle_1atqb_180",ye="_newsCardSummary_1atqb_192",fe="_newsCardFooter_1atqb_204",Te="_newsCardSource_1atqb_213",be="_newsCardDate_1atqb_218",Ce="_emptyState_1atqb_224",Se="_emptyStateIcon_1atqb_236",ve="_emptyStateTitle_1atqb_242",ke="_emptyStateDescription_1atqb_249",Be="_emptyStateButton_1atqb_256",qe="_loadingState_1atqb_278",Ie="_loadingText_1atqb_287",a={container:ne,header:ce,headerLeft:re,title:ie,subtitle:le,headerActions:oe,infoButton:de,backButton:me,settingsButton:he,content:_e,newsGrid:ue,newsCard:pe,newsCardImage:xe,newsCardImagePlaceholder:je,newsCardContent:ge,newsCardSearchTerm:we,newsCardTitle:Ne,newsCardSummary:ye,newsCardFooter:fe,newsCardSource:Te,newsCardDate:be,emptyState:Ce,emptyStateIcon:Se,emptyStateTitle:ve,emptyStateDescription:ke,emptyStateButton:Be,loadingState:qe,loadingText:Ie},Le="_panel_1g3yy_5",De="_content_1g3yy_9",Pe="_image_1g3yy_16",Ae="_imagePlaceholder_1g3yy_23",Ee="_metadata_1g3yy_35",$e="_searchTerm_1g3yy_42",Fe="_source_1g3yy_52",Me="_date_1g3yy_57",Re="_section_1g3yy_62",Ge="_sectionTitle_1g3yy_68",Ke="_summary_1g3yy_75",Oe="_citationsList_1g3yy_141",Ue="_citationItem_1g3yy_150",We="_citationSource_1g3yy_166",ze="_citationSnippet_1g3yy_171",He="_topicsList_1g3yy_178",Qe="_topicTag_1g3yy_184",l={panel:Le,content:De,image:Pe,imagePlaceholder:Ae,metadata:Ee,searchTerm:$e,source:Fe,date:Me,section:Re,sectionTitle:Ge,summary:Ke,citationsList:Oe,citationItem:Ue,citationSource:We,citationSnippet:ze,topicsList:He,topicTag:Qe};function Xe(s){return s?new Date(s).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):""}function Ze(s){if(!s)return"";let t=s.replace(/\[([^\]]+)\]\(https?:\/\/[^)]+\)/g,"$1");return t=t.replace(/[ \t]*https?:\/\/[^\s\n]+[ \t]*/g,""),t=t.replace(/[ \t]{2,}/g," "),t}function Je({item:s,onClose:t}){const{t:c}=k(),d=i.useCallback(r=>{r.key==="Escape"&&t()},[t]);return i.useEffect(()=>(document.addEventListener("keydown",d),()=>{document.removeEventListener("keydown",d)}),[d]),e.jsx($,{isOpen:!0,onDismiss:t,type:F.medium,headerText:s.title,closeButtonAriaLabel:c("news.close"),isLightDismiss:!0,className:l.panel,children:e.jsxs("div",{className:l.content,children:[s.imageUrl?e.jsx("img",{src:s.imageUrl,alt:s.title,className:l.image}):e.jsx("div",{className:l.imagePlaceholder,children:e.jsx(S,{})}),e.jsxs("div",{className:l.metadata,children:[e.jsx("span",{className:l.searchTerm,children:s.searchTerm}),s.source&&e.jsx("span",{className:l.source,children:s.source}),s.publishedAt&&e.jsx("span",{className:l.date,children:Xe(s.publishedAt)})]}),e.jsxs("div",{className:l.section,children:[e.jsx("h3",{className:l.sectionTitle,children:c("news.summary")}),e.jsx("div",{className:l.summary,children:e.jsx(G,{remarkPlugins:[K],children:Ze(s.summary)})})]}),s.citations.length>0&&e.jsxs("div",{className:l.section,children:[e.jsx("h3",{className:l.sectionTitle,children:c("news.citations")}),e.jsx("ul",{className:l.citationsList,children:s.citations.map((r,h)=>e.jsxs("li",{className:l.citationItem,children:[e.jsx(O,{href:r.url,target:"_blank",rel:"noopener noreferrer",children:r.title}),r.source&&e.jsxs("span",{className:l.citationSource,children:[" - ",r.source]}),r.snippet&&e.jsx("p",{className:l.citationSnippet,children:r.snippet})]},h))})]}),s.relatedTopics.length>0&&e.jsxs("div",{className:l.section,children:[e.jsx("h3",{className:l.sectionTitle,children:c("news.relatedTopics")}),e.jsx("div",{className:l.topicsList,children:s.relatedTopics.map((r,h)=>e.jsx("span",{className:l.topicTag,children:r},h))})]})]})})}const Ve="_overlay_frl4o_6",Ye="_dialog_frl4o_21",es="_header_frl4o_33",ss="_title_frl4o_43",ts="_closeButton_frl4o_51",as="_content_frl4o_71",ns="_section_frl4o_77",cs="_sectionTitle_frl4o_85",rs="_paragraph_frl4o_94",is="_list_frl4o_105",ls="_step_frl4o_132",os="_stepNumber_frl4o_142",ds="_stepContent_frl4o_156",ms="_stepTitle_frl4o_160",hs="_footer_frl4o_168",_s="_closeButtonPrimary_frl4o_177",n={overlay:Ve,dialog:Ye,header:es,title:ss,closeButton:ts,content:as,section:ns,sectionTitle:cs,paragraph:rs,list:is,step:ls,stepNumber:os,stepContent:ds,stepTitle:ms,footer:hs,closeButtonPrimary:_s};function A({onClose:s}){const{t}=k(),c=i.useCallback(r=>{r.key==="Escape"&&s()},[s]);i.useEffect(()=>(document.addEventListener("keydown",c),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",c),document.body.style.overflow=""}),[c]);const d=i.useCallback(r=>{r.target===r.currentTarget&&s()},[s]);return e.jsx("div",{className:n.overlay,onClick:d,role:"dialog","aria-modal":"true","aria-labelledby":"news-info-title",children:e.jsxs("div",{className:n.dialog,children:[e.jsxs("div",{className:n.header,children:[e.jsx("h2",{id:"news-info-title",className:n.title,children:t("news.info.title")}),e.jsx("button",{className:n.closeButton,onClick:s,"aria-label":t("news.close"),children:e.jsx(te,{})})]}),e.jsxs("div",{className:n.content,children:[e.jsxs("section",{className:n.section,children:[e.jsx("h3",{className:n.sectionTitle,children:t("news.info.introTitle")}),e.jsx("p",{className:n.paragraph,children:t("news.info.introText")})]}),e.jsxs("section",{className:n.section,children:[e.jsx("h3",{className:n.sectionTitle,children:t("news.info.howItWorksTitle")}),e.jsxs("div",{className:n.step,children:[e.jsx("span",{className:n.stepNumber,children:"1"}),e.jsxs("div",{className:n.stepContent,children:[e.jsx("h4",{className:n.stepTitle,children:t("news.info.step1Title")}),e.jsx("p",{className:n.paragraph,children:t("news.info.step1Text")})]})]}),e.jsxs("div",{className:n.step,children:[e.jsx("span",{className:n.stepNumber,children:"2"}),e.jsxs("div",{className:n.stepContent,children:[e.jsx("h4",{className:n.stepTitle,children:t("news.info.step2Title")}),e.jsx("p",{className:n.paragraph,children:t("news.info.step2Text")})]})]}),e.jsxs("div",{className:n.step,children:[e.jsx("span",{className:n.stepNumber,children:"3"}),e.jsxs("div",{className:n.stepContent,children:[e.jsx("h4",{className:n.stepTitle,children:t("news.info.step3Title")}),e.jsx("p",{className:n.paragraph,children:t("news.info.step3Text")})]})]}),e.jsxs("div",{className:n.step,children:[e.jsx("span",{className:n.stepNumber,children:"4"}),e.jsxs("div",{className:n.stepContent,children:[e.jsx("h4",{className:n.stepTitle,children:t("news.info.step4Title")}),e.jsx("p",{className:n.paragraph,children:t("news.info.step4Text")})]})]})]}),e.jsxs("section",{className:n.section,children:[e.jsx("h3",{className:n.sectionTitle,children:t("news.info.featuresTitle")}),e.jsxs("ul",{className:n.list,children:[e.jsx("li",{children:t("news.info.feature1")}),e.jsx("li",{children:t("news.info.feature2")}),e.jsx("li",{children:t("news.info.feature3")}),e.jsx("li",{children:t("news.info.feature4")}),e.jsx("li",{children:t("news.info.feature5")})]})]}),e.jsxs("section",{className:n.section,children:[e.jsx("h3",{className:n.sectionTitle,children:t("news.info.cachingTitle")}),e.jsx("p",{className:n.paragraph,children:t("news.info.cachingText")})]}),e.jsxs("section",{className:n.section,children:[e.jsx("h3",{className:n.sectionTitle,children:t("news.info.tipsTitle")}),e.jsxs("ul",{className:n.list,children:[e.jsx("li",{children:t("news.info.tip1")}),e.jsx("li",{children:t("news.info.tip2")}),e.jsx("li",{children:t("news.info.tip3")})]})]})]}),e.jsx("div",{className:n.footer,children:e.jsx("button",{className:n.closeButtonPrimary,onClick:s,children:t("news.info.understood")})})]})})}const us="_panel_axyqc_5",ps="_content_axyqc_9",xs="_description_axyqc_16",js="_addSection_axyqc_23",gs="_addInput_axyqc_29",ws="_addButton_axyqc_46",Ns="_counter_axyqc_68",ys="_termsList_axyqc_74",fs="_emptyMessage_axyqc_81",Ts="_termItem_axyqc_89",bs="_termText_axyqc_105",Cs="_deleteButton_axyqc_111",Ss="_infoBanner_axyqc_121",_={panel:us,content:ps,description:xs,addSection:js,addInput:gs,addButton:ws,counter:Ns,termsList:ys,emptyMessage:fs,termItem:Ts,termText:bs,deleteButton:Cs,infoBanner:Ss};function E({preferences:s,onClose:t,onUpdate:c}){const d=M?R().instance:void 0,{t:r}=k(),[h,g]=i.useState(""),[b,y]=i.useState(!1),[B,f]=i.useState(null),[T,p]=i.useState(null),j=s.searchTerms.length<s.maxTerms,x=i.useCallback(async()=>{if(h.trim()){y(!0),p(null);try{const o=d?await v(d):void 0,u=await U(h.trim(),o);c(u),g("")}catch(o){console.error("Error adding search term:",o),p(o instanceof Error?o.message:"Failed to add search term")}finally{y(!1)}}},[d,h,c]),C=i.useCallback(async o=>{f(o),p(null);try{const u=d?await v(d):void 0,m=await W(o,u);c(m)}catch(u){console.error("Error deleting search term:",u),p(u instanceof Error?u.message:"Failed to delete search term")}finally{f(null)}},[d,c]),w=i.useCallback(o=>{o.key==="Enter"&&j&&h.trim()&&x()},[j,x,h]);return e.jsx($,{isOpen:!0,onDismiss:t,type:F.medium,headerText:r("news.preferencesTitle"),closeButtonAriaLabel:r("news.close"),isLightDismiss:!0,className:_.panel,children:e.jsxs("div",{className:_.content,children:[e.jsx("p",{className:_.description,children:r("news.preferencesDescription")}),T&&e.jsx(z,{messageBarType:H.error,onDismiss:()=>p(null),children:T}),e.jsxs("div",{className:_.addSection,children:[e.jsx(Q,{placeholder:r("news.addTermPlaceholder"),value:h,onChange:(o,u)=>g(u||""),onKeyPress:w,disabled:!j||b,className:_.addInput}),e.jsxs(X,{onClick:x,disabled:!j||!h.trim()||b,className:_.addButton,children:[e.jsx(ae,{}),r("news.add")]})]}),e.jsx("p",{className:_.counter,children:r("news.termsCount",{current:s.searchTerms.length,max:s.maxTerms})}),e.jsx("div",{className:_.termsList,children:s.searchTerms.length===0?e.jsx("p",{className:_.emptyMessage,children:r("news.noTermsConfigured")}):s.searchTerms.map(o=>e.jsxs("div",{className:_.termItem,children:[e.jsx("span",{className:_.termText,children:o}),e.jsx(Z,{iconProps:{iconName:"Delete"},onClick:()=>C(o),disabled:B===o,className:_.deleteButton,ariaLabel:r("news.deleteTerm",{term:o}),children:e.jsx(J,{})})]},o))}),e.jsx("div",{className:_.infoBanner,children:e.jsx("p",{children:r("news.preferencesInfo")})})]})})}function vs(s){return s?new Date(s).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):""}function ks(s){return s?s.replace(/\*\*([^*]+)\*\*/g,"$1").replace(/\*([^*]+)\*/g,"$1").replace(/__([^_]+)__/g,"$1").replace(/_([^_]+)_/g,"$1").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1").replace(/\[([^\]]+)\]\[[^\]]*\]/g,"$1").replace(/^#{1,6}\s+/gm,"").replace(/^[-*_]{3,}\s*$/gm,"").replace(/^[\s]*[-*+]\s+/gm,"").replace(/^[\s]*\d+\.\s+/gm,"").replace(/```[\s\S]*?```/g,"").replace(/`([^`]+)`/g,"$1").replace(/^>\s+/gm,"").replace(/\n{3,}/g,`

`).trim():""}function Bs({item:s,onClick:t}){const c=ks(s.summary);return e.jsxs("article",{className:a.newsCard,onClick:t,role:"button",tabIndex:0,children:[s.imageUrl?e.jsx("img",{src:s.imageUrl,alt:s.title,className:a.newsCardImage}):e.jsx("div",{className:a.newsCardImagePlaceholder,children:e.jsx(S,{})}),e.jsxs("div",{className:a.newsCardContent,children:[e.jsx("span",{className:a.newsCardSearchTerm,children:s.searchTerm}),e.jsx("h3",{className:a.newsCardTitle,children:s.title}),e.jsx("p",{className:a.newsCardSummary,children:c}),e.jsxs("div",{className:a.newsCardFooter,children:[e.jsx("span",{className:a.newsCardSource,children:s.source||"Web"}),e.jsx("span",{className:a.newsCardDate,children:vs(s.publishedAt)})]})]})]})}function Ds(){const s=V(),t=M?R().instance:void 0,{t:c}=k(),[d,r]=i.useState(null),[h,g]=i.useState(null),[b,y]=i.useState(!0),[B,f]=i.useState(null),[T,p]=i.useState(null),[j,x]=i.useState(!1),[C,w]=i.useState(!1),o=i.useCallback(async()=>{y(!0),f(null);try{const m=t?await v(t):void 0,N=await Y(m);if(r(N),N.searchTerms.length>0){const q=await I(m);g(q)}}catch(m){console.error("Error loading news data:",m),f(m instanceof Error?m.message:"Failed to load news data")}finally{y(!1)}},[t]),u=i.useCallback(async m=>{r(m),m.searchTerms.length>0?setTimeout(async()=>{try{const N=t?await v(t):void 0,q=await I(N);g(q)}catch(N){console.error("Error reloading cached news:",N)}},3e3):g(null)},[t]);return i.useEffect(()=>{o()},[o]),b?e.jsxs("div",{className:a.container,children:[e.jsx("header",{className:a.header,children:e.jsxs("div",{className:a.headerLeft,children:[e.jsx("h1",{className:a.title,children:c("news.title")}),e.jsx("p",{className:a.subtitle,children:c("news.subtitle")})]})}),e.jsx("div",{className:a.content,children:e.jsxs("div",{className:a.loadingState,children:[e.jsx(ee,{size:se.large}),e.jsx("p",{className:a.loadingText,children:c("news.loading")})]})})]}):B||!d?.searchTerms.length?e.jsxs("div",{className:a.container,children:[e.jsxs("header",{className:a.header,children:[e.jsxs("div",{className:a.headerLeft,children:[e.jsx("h1",{className:a.title,children:c("news.title")}),e.jsx("p",{className:a.subtitle,children:c("news.subtitle")})]}),e.jsxs("div",{className:a.headerActions,children:[e.jsxs("button",{className:a.infoButton,onClick:()=>w(!0),title:c("news.explainFunction"),children:[e.jsx(P,{}),c("news.explainFunction")]}),e.jsxs("button",{className:a.backButton,onClick:()=>s("/"),children:[e.jsx(L,{}),c("news.backToChat")]})]})]}),e.jsx("div",{className:a.content,children:e.jsxs("div",{className:a.emptyState,children:[e.jsx(S,{className:a.emptyStateIcon}),e.jsx("h2",{className:a.emptyStateTitle,children:c("news.emptyTitle")}),e.jsx("p",{className:a.emptyStateDescription,children:c("news.emptyDescription")}),e.jsxs("button",{className:a.emptyStateButton,onClick:()=>x(!0),children:[e.jsx(D,{}),c("news.configureTopics")]})]})}),j&&e.jsx(E,{preferences:d||{searchTerms:[],updatedAt:0,maxTerms:10},onClose:()=>x(!1),onUpdate:u}),C&&e.jsx(A,{onClose:()=>w(!1)})]}):e.jsxs("div",{className:a.container,children:[e.jsxs("header",{className:a.header,children:[e.jsxs("div",{className:a.headerLeft,children:[e.jsx("h1",{className:a.title,children:c("news.title")}),e.jsx("p",{className:a.subtitle,children:c("news.subtitle")})]}),e.jsxs("div",{className:a.headerActions,children:[e.jsxs("button",{className:a.infoButton,onClick:()=>w(!0),title:c("news.explainFunction"),children:[e.jsx(P,{}),c("news.explainFunction")]}),e.jsxs("button",{className:a.settingsButton,onClick:()=>x(!0),children:[e.jsx(D,{}),c("news.settings")]}),e.jsxs("button",{className:a.backButton,onClick:()=>s("/"),children:[e.jsx(L,{}),c("news.backToChat")]})]})]}),e.jsx("div",{className:a.content,children:h?.items.length?e.jsx("div",{className:a.newsGrid,children:h.items.map(m=>e.jsx(Bs,{item:m,onClick:()=>p(m)},m.id))}):e.jsxs("div",{className:a.emptyState,children:[e.jsx(S,{className:a.emptyStateIcon}),e.jsx("h2",{className:a.emptyStateTitle,children:c("news.noNewsTitle")})]})}),T&&e.jsx(Je,{item:T,onClose:()=>p(null)}),j&&d&&e.jsx(E,{preferences:d,onClose:()=>x(!1),onUpdate:u}),C&&e.jsx(A,{onClose:()=>w(!1)})]})}export{Ds as Component};
//# sourceMappingURL=NewsDashboard-CcSIbH79.js.map
