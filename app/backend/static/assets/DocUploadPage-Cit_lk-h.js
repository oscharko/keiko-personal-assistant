import{P as X,r as c,O as e,am as U,Q as H,R as z,X as I,Z as Y,a8 as $,an as P,ab as B,ao as S,ap as G,Y as O,aq as J}from"./index-BapqnFUw.js";import{D as q,I as K}from"./chunk-28-BmcailBo.js";const W="_container_hvc49_6",Q="_header_hvc49_17",V="_headerLeft_hvc49_27",Z="_title_hvc49_33",ee="_subtitle_hvc49_40",te="_headerActions_hvc49_47",se="_infoButton_hvc49_53",ae="_backButton_hvc49_54",ne="_content_hvc49_97",oe="_uploadArea_hvc49_105",ie="_dragActive_hvc49_120",le="_uploadContent_hvc49_124",ce="_uploadIcon_hvc49_133",re="_uploadText_hvc49_139",de="_uploadSubtext_hvc49_146",he="_fileInput_hvc49_151",pe="_documentList_hvc49_155",ue="_listHeader_hvc49_162",me="_table_hvc49_179",fe="_spinner_hvc49_229",xe="_error_hvc49_235",_e="_noFiles_hvc49_244",i={container:W,header:Q,headerLeft:V,title:Z,subtitle:ee,headerActions:te,infoButton:se,backButton:ae,content:ne,uploadArea:oe,dragActive:ie,uploadContent:le,uploadIcon:ce,uploadText:re,uploadSubtext:de,fileInput:he,documentList:pe,listHeader:ue,table:me,spinner:fe,error:xe,noFiles:_e},je="_overlay_1hy28_6",ve="_dialog_1hy28_21",ge="_header_1hy28_33",Ne="_title_1hy28_43",ye="_closeButton_1hy28_51",Te="_content_1hy28_71",be="_section_1hy28_77",Ce="_sectionTitle_1hy28_85",De="_paragraph_1hy28_94",we="_list_1hy28_105",ke="_step_1hy28_132",Fe="_stepNumber_1hy28_142",Ee="_stepContent_1hy28_156",Le="_stepTitle_1hy28_160",Ae="_formatGrid_1hy28_168",Ie="_formatCategory_1hy28_175",Pe="_formatTitle_1hy28_182",Be="_formatList_1hy28_191",Se="_footer_1hy28_205",Me="_closeButtonPrimary_1hy28_214",t={overlay:je,dialog:ve,header:ge,title:Ne,closeButton:ye,content:Te,section:be,sectionTitle:Ce,paragraph:De,list:we,step:ke,stepNumber:Fe,stepContent:Ee,stepTitle:Le,formatGrid:Ae,formatCategory:Ie,formatTitle:Pe,formatList:Be,footer:Se,closeButtonPrimary:Me};function Re({onClose:n}){const{t:a}=X(),f=c.useCallback(j=>{j.key==="Escape"&&n()},[n]);c.useEffect(()=>(document.addEventListener("keydown",f),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",f),document.body.style.overflow=""}),[f]);const N=c.useCallback(j=>{j.target===j.currentTarget&&n()},[n]);return e.jsx("div",{className:t.overlay,onClick:N,role:"dialog","aria-modal":"true","aria-labelledby":"docupload-info-title",children:e.jsxs("div",{className:t.dialog,children:[e.jsxs("div",{className:t.header,children:[e.jsx("h2",{id:"docupload-info-title",className:t.title,children:a("upload.info.title")}),e.jsx("button",{className:t.closeButton,onClick:n,"aria-label":a("upload.close"),children:e.jsx(q,{})})]}),e.jsxs("div",{className:t.content,children:[e.jsxs("section",{className:t.section,children:[e.jsx("h3",{className:t.sectionTitle,children:a("upload.info.introTitle")}),e.jsx("p",{className:t.paragraph,children:a("upload.info.introText")})]}),e.jsxs("section",{className:t.section,children:[e.jsx("h3",{className:t.sectionTitle,children:a("upload.info.howItWorksTitle")}),e.jsxs("div",{className:t.step,children:[e.jsx("span",{className:t.stepNumber,children:"1"}),e.jsxs("div",{className:t.stepContent,children:[e.jsx("h4",{className:t.stepTitle,children:a("upload.info.step1Title")}),e.jsx("p",{className:t.paragraph,children:a("upload.info.step1Text")})]})]}),e.jsxs("div",{className:t.step,children:[e.jsx("span",{className:t.stepNumber,children:"2"}),e.jsxs("div",{className:t.stepContent,children:[e.jsx("h4",{className:t.stepTitle,children:a("upload.info.step2Title")}),e.jsx("p",{className:t.paragraph,children:a("upload.info.step2Text")})]})]}),e.jsxs("div",{className:t.step,children:[e.jsx("span",{className:t.stepNumber,children:"3"}),e.jsxs("div",{className:t.stepContent,children:[e.jsx("h4",{className:t.stepTitle,children:a("upload.info.step3Title")}),e.jsx("p",{className:t.paragraph,children:a("upload.info.step3Text")})]})]}),e.jsxs("div",{className:t.step,children:[e.jsx("span",{className:t.stepNumber,children:"4"}),e.jsxs("div",{className:t.stepContent,children:[e.jsx("h4",{className:t.stepTitle,children:a("upload.info.step4Title")}),e.jsx("p",{className:t.paragraph,children:a("upload.info.step4Text")})]})]})]}),e.jsxs("section",{className:t.section,children:[e.jsx("h3",{className:t.sectionTitle,children:a("upload.info.formatsTitle")}),e.jsx("p",{className:t.paragraph,children:a("upload.info.formatsText")}),e.jsxs("div",{className:t.formatGrid,children:[e.jsxs("div",{className:t.formatCategory,children:[e.jsx("h4",{className:t.formatTitle,children:a("upload.info.documentsTitle")}),e.jsxs("ul",{className:t.formatList,children:[e.jsx("li",{children:"PDF"}),e.jsx("li",{children:"DOCX"}),e.jsx("li",{children:"XLSX"}),e.jsx("li",{children:"PPTX"})]})]}),e.jsxs("div",{className:t.formatCategory,children:[e.jsx("h4",{className:t.formatTitle,children:a("upload.info.textTitle")}),e.jsxs("ul",{className:t.formatList,children:[e.jsx("li",{children:"TXT"}),e.jsx("li",{children:"MD"}),e.jsx("li",{children:"HTML"}),e.jsx("li",{children:"JSON"})]})]}),e.jsxs("div",{className:t.formatCategory,children:[e.jsx("h4",{className:t.formatTitle,children:a("upload.info.imagesTitle")}),e.jsxs("ul",{className:t.formatList,children:[e.jsx("li",{children:"JPEG/JPG"}),e.jsx("li",{children:"PNG"}),e.jsx("li",{children:"BMP"}),e.jsx("li",{children:"TIFF/HEIC"})]})]})]})]}),e.jsxs("section",{className:t.section,children:[e.jsx("h3",{className:t.sectionTitle,children:a("upload.info.featuresTitle")}),e.jsxs("ul",{className:t.list,children:[e.jsx("li",{children:a("upload.info.feature1")}),e.jsx("li",{children:a("upload.info.feature2")}),e.jsx("li",{children:a("upload.info.feature3")}),e.jsx("li",{children:a("upload.info.feature4")})]})]}),e.jsxs("section",{className:t.section,children:[e.jsx("h3",{className:t.sectionTitle,children:a("upload.info.privacyTitle")}),e.jsx("p",{className:t.paragraph,children:a("upload.info.privacyText")})]})]}),e.jsx("div",{className:t.footer,children:e.jsx("button",{className:t.closeButtonPrimary,onClick:n,children:a("upload.info.understood")})})]})})}const Xe="_container_17uhl_6",Ue="_canvas_17uhl_18",M={container:Xe,canvas:Ue},He=({backgroundColor:n="#DCFF4A",particleColor:a="#000000",particleDensity:f=9e3,mouseRadius:N=100,className:j})=>{const w=c.useRef(null),A=c.useRef(null);return c.useEffect(()=>{const h=w.current,v=A.current;if(!h||!v)return;const r=h.getContext("2d");if(!r)return;let k,y=[],g={x:0,y:0,radius:N};const T=()=>{h.width=v.offsetWidth,h.height=v.offsetHeight,x()},d=o=>{const u=v.getBoundingClientRect();g.x=o.clientX-u.left,g.y=o.clientY-u.top},x=()=>{y=[];const o=h.width*h.height/f;for(let u=0;u<o;u++){const p=Math.random()*3+1,_=Math.random()*(h.width-p*2-p*2)+p*2,C=Math.random()*(h.height-p*2-p*2)+p*2,E=Math.random()*2-1,D=Math.random()*2-1;y.push({x:_,y:C,vx:E,vy:D,size:p,color:a,baseX:_,baseY:C,density:Math.random()*30+1})}},F=()=>{if(k=requestAnimationFrame(F),!!r){r.clearRect(0,0,h.width,h.height);for(const o of y){const u=g.x-o.x,p=g.y-o.y,_=Math.hypot(u,p),C=u/_,E=p/_,D=g.radius,s=(D-_)/D,l=C*s*o.density,m=E*s*o.density;if(_<g.radius)o.x-=l,o.y-=m;else{if(o.x!==o.baseX){const L=o.x-o.baseX;o.x-=L/10}if(o.y!==o.baseY){const L=o.y-o.baseY;o.y-=L/10}}r.beginPath(),r.arc(o.x,o.y,o.size,0,Math.PI*2),r.fillStyle=o.color,r.fill()}}};window.addEventListener("resize",T),window.addEventListener("mousemove",d);const b=new ResizeObserver(T);return b.observe(v),T(),F(),()=>{window.removeEventListener("resize",T),window.removeEventListener("mousemove",d),cancelAnimationFrame(k),b.disconnect()}},[a,f,N]),e.jsx("div",{ref:A,className:`${M.container} ${j||""}`,style:{backgroundColor:n},children:e.jsx("canvas",{ref:w,className:M.canvas})})},R=".pdf,.html,.txt,.md,.jpeg,.jpg,.png,.docx,.xlsx,.pptx,.json,.bmp,.heic,.tiff",ze=["application/pdf","text/html","text/plain","text/markdown","image/jpeg","image/png","image/bmp","image/heic","image/tiff","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/json"],Ye=()=>!!localStorage.getItem("beta_auth_token");function $e(){const{t:n}=X(),a=U(),[f,N]=c.useState([]),[j,w]=c.useState(!1),[A,h]=c.useState(!1),[v,r]=c.useState(null),[k,y]=c.useState(!1),[g,T]=c.useState(!1),d=Ye(),x=H&&!d?z().instance:void 0,F=c.useRef(null),b=c.useCallback(async()=>{if(!(!d&&!x)){w(!0),r(null);try{const s=d?"":await I(x);if(!d&&!s)throw new Error("Failed to get access token");N(await Y(s||""))}catch(s){r(s instanceof Error?s.message:"Unknown error")}finally{w(!1)}}},[x,d]);c.useEffect(()=>{b()},[b]);const o=s=>{if(ze.includes(s.type))return!0;const l=s.name.toLowerCase().split(".").pop();return l?R.split(",").map(m=>m.replace(".","")).includes(l):!1},u=async s=>{if(!d&&!x)return;if(!o(s)){r(n("upload.invalidFileType","Invalid file type."));return}h(!0),r(null);const l=new FormData;l.append("file",s);try{const m=d?"":await I(x);if(!d&&!m)throw new Error("Failed to get access token");await J(l,m||""),await b()}catch(m){r(m instanceof Error?m.message:"Unknown error")}finally{h(!1)}},p=async s=>{if(!(!d&&!x)&&confirm(n("upload.confirmDelete",{filename:s})))try{const l=d?"":await I(x);if(!d&&!l)throw new Error("Failed to get access token");await O(s,l||""),N(m=>m.filter(L=>L!==s))}catch(l){r(l instanceof Error?l.message:"Unknown error")}},_=s=>{s.preventDefault(),y(!0)},C=s=>{s.preventDefault(),y(!1)},E=s=>{s.preventDefault(),y(!1),s.dataTransfer.files?.length>0&&(u(s.dataTransfer.files[0]),s.dataTransfer.clearData())},D=s=>{s.target.files?.length&&u(s.target.files[0])};return e.jsxs("div",{className:i.container,children:[e.jsx($,{children:e.jsxs("title",{children:[n("upload.title","Document Management")," - Keiko"]})}),e.jsxs("div",{className:i.header,children:[e.jsxs("div",{className:i.headerLeft,children:[e.jsx("h1",{className:i.title,children:n("upload.title")}),e.jsx("p",{className:i.subtitle,children:n("upload.subtitle")})]}),e.jsxs("div",{className:i.headerActions,children:[e.jsxs("button",{className:i.infoButton,onClick:()=>T(!0),title:n("upload.explainFunction"),children:[e.jsx(K,{}),n("upload.explainFunction")]}),e.jsxs("button",{className:i.backButton,onClick:()=>a("/"),children:[e.jsx(P,{iconName:"Back"}),n("upload.backToChat")]})]})]}),v&&e.jsx("div",{className:i.error,children:v}),e.jsxs("div",{className:i.content,children:[e.jsxs("div",{className:`${i.uploadArea} ${k?i.dragActive:""}`,onDragOver:_,onDragLeave:C,onDrop:E,onClick:()=>F.current?.click(),children:[e.jsx(He,{backgroundColor:"#DCFF4A",particleColor:"#000000"}),e.jsxs("div",{className:i.uploadContent,children:[e.jsx("input",{type:"file",ref:F,className:i.fileInput,onChange:D,accept:R,style:{display:"none"}}),e.jsx(P,{iconName:"CloudUpload",className:i.uploadIcon}),A?e.jsx(B,{size:S.medium,label:n("upload.uploading","Uploading...")}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:i.uploadText,children:k?n("upload.dropHere","Drop here"):n("upload.dragDrop","Drag & drop a file here, or click to select")}),e.jsx("p",{className:i.uploadSubtext,children:n("upload.supportedTypes","PDF, HTML, TXT, MD, JPEG, PNG, DOCX")})]})]})]}),e.jsxs("div",{className:i.documentList,children:[e.jsx("h2",{className:i.listHeader,children:n("upload.uploadedFiles","Uploaded Documents")}),j?e.jsx("div",{className:i.spinner,children:e.jsx(B,{size:S.large})}):e.jsxs("table",{className:i.table,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:n("upload.filename","Filename")}),e.jsx("th",{children:n("upload.actions","Actions")})]})}),e.jsx("tbody",{children:f.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:2,className:i.noFiles,children:n("upload.noFiles","No files uploaded")})}):f.map((s,l)=>e.jsxs("tr",{children:[e.jsx("td",{children:s}),e.jsx("td",{children:e.jsx(G,{iconProps:{iconName:"Delete"},title:n("upload.delete"),ariaLabel:n("delete","Delete"),onClick:()=>p(s),styles:{root:{backgroundColor:"#DCFF4A",color:"#000",marginLeft:"8px",borderRadius:"20%",border:"1px solid #000"},rootHovered:{backgroundColor:"#000",color:"#fff",borderRadius:"20%",border:"1px solid #DCFF4A"}}})})]},l))})]})]})]}),g&&e.jsx(Re,{onClose:()=>T(!1)})]})}$e.displayName="DocUploadPage";export{$e as Component};
//# sourceMappingURL=DocUploadPage-Cit_lk-h.js.map
