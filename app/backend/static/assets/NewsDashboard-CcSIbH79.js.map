{"version":3,"file":"NewsDashboard-CcSIbH79.js","sources":["../../../frontend/src/pages/news/NewsDetailModal.tsx","../../../frontend/src/pages/news/NewsInfoDialog.tsx","../../../frontend/src/pages/news/NewsPreferencesModal.tsx","../../../frontend/src/pages/news/NewsDashboard.tsx"],"sourcesContent":["/**\n * News Detail Modal component.\n * Displays full details of a news item including summary, citations, and related topics.\n */\n\nimport {useCallback, useEffect} from \"react\";\nimport {Link, Panel, PanelType} from \"@fluentui/react\";\nimport {News24Regular} from \"@fluentui/react-icons\";\nimport {useTranslation} from \"react-i18next\";\nimport ReactMarkdown from \"react-markdown\";\nimport remarkGfm from \"remark-gfm\";\n\nimport {NewsItem} from \"../../api/models\";\nimport styles from \"./NewsDetailModal.module.css\";\n\ninterface NewsDetailModalProps {\n    item: NewsItem;\n    onClose: () => void;\n}\n\n/**\n * Format a timestamp to a readable date string.\n */\n/**\n * Format a timestamp to a readable date string.\n */\nfunction formatDate(timestamp: number | undefined): string {\n    if (!timestamp) return \"\";\n    const date = new Date(timestamp);\n    return date.toLocaleDateString(undefined, {\n        year: \"numeric\",\n        month: \"long\",\n        day: \"numeric\",\n        hour: \"2-digit\",\n        minute: \"2-digit\"\n    });\n}\n\n/**\n * Remove HTTP/HTTPS links from text while preserving the rest of the content.\n * Removes markdown links [text](url) and plain URLs, but preserves line breaks for lists.\n */\nfunction removeHttpLinks(text: string | undefined): string {\n    if (!text) return \"\";\n    // Remove markdown links but keep the link text: [text](url) -> text\n    let cleaned = text.replace(/\\[([^\\]]+)\\]\\(https?:\\/\\/[^)]+\\)/g, \"$1\");\n    // Remove standalone URLs (preserve newlines, only remove spaces around URLs)\n    cleaned = cleaned.replace(/[ \\t]*https?:\\/\\/[^\\s\\n]+[ \\t]*/g, \"\");\n    // Clean up multiple spaces on the same line (but not newlines)\n    cleaned = cleaned.replace(/[ \\t]{2,}/g, \" \");\n    return cleaned;\n}\n\nexport function NewsDetailModal({item, onClose}: NewsDetailModalProps) {\n    const {t} = useTranslation();\n\n    // Handle escape key to close modal\n    const handleKeyDown = useCallback(\n        (event: KeyboardEvent) => {\n            if (event.key === \"Escape\") {\n                onClose();\n            }\n        },\n        [onClose]\n    );\n\n    useEffect(() => {\n        document.addEventListener(\"keydown\", handleKeyDown);\n        return () => {\n            document.removeEventListener(\"keydown\", handleKeyDown);\n        };\n    }, [handleKeyDown]);\n\n    return (\n        <Panel\n            isOpen={true}\n            onDismiss={onClose}\n            type={PanelType.medium}\n            headerText={item.title}\n            closeButtonAriaLabel={t(\"news.close\")}\n            isLightDismiss\n            className={styles.panel}\n        >\n            <div className={styles.content}>\n                {/* Image */}\n                {item.imageUrl ? (\n                    <img src={item.imageUrl} alt={item.title} className={styles.image}/>\n                ) : (\n                    <div className={styles.imagePlaceholder}>\n                        <News24Regular/>\n                    </div>\n                )}\n\n                {/* Metadata */}\n                <div className={styles.metadata}>\n                    <span className={styles.searchTerm}>{item.searchTerm}</span>\n                    {item.source && <span className={styles.source}>{item.source}</span>}\n                    {item.publishedAt && <span className={styles.date}>{formatDate(item.publishedAt)}</span>}\n                </div>\n\n                {/* Summary */}\n                <div className={styles.section}>\n                    <h3 className={styles.sectionTitle}>{t(\"news.summary\")}</h3>\n                    <div className={styles.summary}>\n                        <ReactMarkdown remarkPlugins={[remarkGfm]}>{removeHttpLinks(item.summary)}</ReactMarkdown>\n                    </div>\n                </div>\n\n                {/* Citations */}\n                {item.citations.length > 0 && (\n                    <div className={styles.section}>\n                        <h3 className={styles.sectionTitle}>{t(\"news.citations\")}</h3>\n                        <ul className={styles.citationsList}>\n                            {item.citations.map((citation, index) => (\n                                <li key={index} className={styles.citationItem}>\n                                    <Link href={citation.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                                        {citation.title}\n                                    </Link>\n                                    {citation.source &&\n                                        <span className={styles.citationSource}> - {citation.source}</span>}\n                                    {citation.snippet && <p className={styles.citationSnippet}>{citation.snippet}</p>}\n                                </li>\n                            ))}\n                        </ul>\n                    </div>\n                )}\n\n                {/* Related Topics */}\n                {item.relatedTopics.length > 0 && (\n                    <div className={styles.section}>\n                        <h3 className={styles.sectionTitle}>{t(\"news.relatedTopics\")}</h3>\n                        <div className={styles.topicsList}>\n                            {item.relatedTopics.map((topic, index) => (\n                                <span key={index} className={styles.topicTag}>\n                                    {topic}\n                                </span>\n                            ))}\n                        </div>\n                    </div>\n                )}\n            </div>\n        </Panel>\n    );\n}\n\n","/**\n * News Info Dialog component.\n * Displays a comprehensive explanation of the News Dashboard functionality\n * and how personalized news works.\n */\n\nimport { useCallback, useEffect } from \"react\";\nimport { Dismiss24Regular } from \"@fluentui/react-icons\";\nimport { useTranslation } from \"react-i18next\";\n\nimport styles from \"./NewsInfoDialog.module.css\";\n\ninterface NewsInfoDialogProps {\n    onClose: () => void;\n}\n\n/**\n * Dialog component that explains the News Dashboard functionality.\n */\nexport function NewsInfoDialog({ onClose }: NewsInfoDialogProps): JSX.Element {\n    const { t } = useTranslation();\n\n    // Handle escape key to close dialog\n    const handleKeyDown = useCallback(\n        (event: KeyboardEvent) => {\n            if (event.key === \"Escape\") {\n                onClose();\n            }\n        },\n        [onClose]\n    );\n\n    // Add/remove event listener for escape key\n    useEffect(() => {\n        document.addEventListener(\"keydown\", handleKeyDown);\n        // Prevent body scroll when dialog is open\n        document.body.style.overflow = \"hidden\";\n\n        return () => {\n            document.removeEventListener(\"keydown\", handleKeyDown);\n            document.body.style.overflow = \"\";\n        };\n    }, [handleKeyDown]);\n\n    // Handle overlay click to close dialog\n    const handleOverlayClick = useCallback(\n        (event: React.MouseEvent<HTMLDivElement>) => {\n            if (event.target === event.currentTarget) {\n                onClose();\n            }\n        },\n        [onClose]\n    );\n\n    return (\n        <div\n            className={styles.overlay}\n            onClick={handleOverlayClick}\n            role=\"dialog\"\n            aria-modal=\"true\"\n            aria-labelledby=\"news-info-title\"\n        >\n            <div className={styles.dialog}>\n                {/* Header */}\n                <div className={styles.header}>\n                    <h2 id=\"news-info-title\" className={styles.title}>\n                        {t(\"news.info.title\")}\n                    </h2>\n                    <button\n                        className={styles.closeButton}\n                        onClick={onClose}\n                        aria-label={t(\"news.close\")}\n                    >\n                        <Dismiss24Regular />\n                    </button>\n                </div>\n\n                {/* Content */}\n                <div className={styles.content}>\n                    {/* Introduction */}\n                    <section className={styles.section}>\n                        <h3 className={styles.sectionTitle}>{t(\"news.info.introTitle\")}</h3>\n                        <p className={styles.paragraph}>{t(\"news.info.introText\")}</p>\n                    </section>\n\n                    {/* How it works */}\n                    <section className={styles.section}>\n                        <h3 className={styles.sectionTitle}>{t(\"news.info.howItWorksTitle\")}</h3>\n\n                        {/* Step 1: Topics */}\n                        <div className={styles.step}>\n                            <span className={styles.stepNumber}>1</span>\n                            <div className={styles.stepContent}>\n                                <h4 className={styles.stepTitle}>{t(\"news.info.step1Title\")}</h4>\n                                <p className={styles.paragraph}>{t(\"news.info.step1Text\")}</p>\n                            </div>\n                        </div>\n\n                        {/* Step 2: Automatic Fetching */}\n                        <div className={styles.step}>\n                            <span className={styles.stepNumber}>2</span>\n                            <div className={styles.stepContent}>\n                                <h4 className={styles.stepTitle}>{t(\"news.info.step2Title\")}</h4>\n                                <p className={styles.paragraph}>{t(\"news.info.step2Text\")}</p>\n                            </div>\n                        </div>\n\n                        {/* Step 3: AI Summary */}\n                        <div className={styles.step}>\n                            <span className={styles.stepNumber}>3</span>\n                            <div className={styles.stepContent}>\n                                <h4 className={styles.stepTitle}>{t(\"news.info.step3Title\")}</h4>\n                                <p className={styles.paragraph}>{t(\"news.info.step3Text\")}</p>\n                            </div>\n                        </div>\n\n                        {/* Step 4: Display */}\n                        <div className={styles.step}>\n                            <span className={styles.stepNumber}>4</span>\n                            <div className={styles.stepContent}>\n                                <h4 className={styles.stepTitle}>{t(\"news.info.step4Title\")}</h4>\n                                <p className={styles.paragraph}>{t(\"news.info.step4Text\")}</p>\n                            </div>\n                        </div>\n                    </section>\n\n                    {/* Features */}\n                    <section className={styles.section}>\n                        <h3 className={styles.sectionTitle}>{t(\"news.info.featuresTitle\")}</h3>\n                        <ul className={styles.list}>\n                            <li>{t(\"news.info.feature1\")}</li>\n                            <li>{t(\"news.info.feature2\")}</li>\n                            <li>{t(\"news.info.feature3\")}</li>\n                            <li>{t(\"news.info.feature4\")}</li>\n                            <li>{t(\"news.info.feature5\")}</li>\n                        </ul>\n                    </section>\n\n                    {/* Caching */}\n                    <section className={styles.section}>\n                        <h3 className={styles.sectionTitle}>{t(\"news.info.cachingTitle\")}</h3>\n                        <p className={styles.paragraph}>{t(\"news.info.cachingText\")}</p>\n                    </section>\n\n                    {/* Tips */}\n                    <section className={styles.section}>\n                        <h3 className={styles.sectionTitle}>{t(\"news.info.tipsTitle\")}</h3>\n                        <ul className={styles.list}>\n                            <li>{t(\"news.info.tip1\")}</li>\n                            <li>{t(\"news.info.tip2\")}</li>\n                            <li>{t(\"news.info.tip3\")}</li>\n                        </ul>\n                    </section>\n                </div>\n\n                {/* Footer */}\n                <div className={styles.footer}>\n                    <button className={styles.closeButtonPrimary} onClick={onClose}>\n                        {t(\"news.info.understood\")}\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n}\n\n","/**\n * News Preferences Modal component.\n * Allows users to manage their news search terms.\n */\n\nimport { useState, useCallback } from \"react\";\nimport { Panel, PanelType, TextField, PrimaryButton, IconButton, MessageBar, MessageBarType } from \"@fluentui/react\";\nimport { Delete24Regular, Add24Regular } from \"@fluentui/react-icons\";\nimport { useMsal } from \"@azure/msal-react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { addNewsSearchTermApi, deleteNewsSearchTermApi } from \"../../api\";\nimport { NewsPreferencesResponse } from \"../../api/models\";\nimport { getToken, useLogin } from \"../../authConfig\";\nimport styles from \"./NewsPreferencesModal.module.css\";\n\ninterface NewsPreferencesModalProps {\n    preferences: NewsPreferencesResponse;\n    onClose: () => void;\n    onUpdate: (preferences: NewsPreferencesResponse) => void;\n}\n\nexport function NewsPreferencesModal({ preferences, onClose, onUpdate }: NewsPreferencesModalProps) {\n    // Only use MSAL instance if useLogin is true (Azure AD auth)\n    const client = useLogin ? useMsal().instance : undefined;\n    const { t } = useTranslation();\n\n    const [newTerm, setNewTerm] = useState(\"\");\n    const [isAdding, setIsAdding] = useState(false);\n    const [deletingTerm, setDeletingTerm] = useState<string | null>(null);\n    const [error, setError] = useState<string | null>(null);\n\n    const canAddMore = preferences.searchTerms.length < preferences.maxTerms;\n\n    /**\n     * Add a new search term.\n     */\n    const handleAddTerm = useCallback(async () => {\n        if (!newTerm.trim()) return;\n\n        setIsAdding(true);\n        setError(null);\n\n        try {\n            const token = client ? await getToken(client) : undefined;\n            const updatedPrefs = await addNewsSearchTermApi(newTerm.trim(), token);\n            onUpdate(updatedPrefs);\n            setNewTerm(\"\");\n        } catch (err) {\n            console.error(\"Error adding search term:\", err);\n            setError(err instanceof Error ? err.message : \"Failed to add search term\");\n        } finally {\n            setIsAdding(false);\n        }\n    }, [client, newTerm, onUpdate]);\n\n    /**\n     * Delete a search term.\n     */\n    const handleDeleteTerm = useCallback(\n        async (term: string) => {\n            setDeletingTerm(term);\n            setError(null);\n\n            try {\n                const token = client ? await getToken(client) : undefined;\n                const updatedPrefs = await deleteNewsSearchTermApi(term, token);\n                onUpdate(updatedPrefs);\n            } catch (err) {\n                console.error(\"Error deleting search term:\", err);\n                setError(err instanceof Error ? err.message : \"Failed to delete search term\");\n            } finally {\n                setDeletingTerm(null);\n            }\n        },\n        [client, onUpdate]\n    );\n\n    /**\n     * Handle Enter key press in the input field.\n     */\n    const handleKeyPress = useCallback(\n        (event: React.KeyboardEvent<HTMLInputElement>) => {\n            if (event.key === \"Enter\" && canAddMore && newTerm.trim()) {\n                handleAddTerm();\n            }\n        },\n        [canAddMore, handleAddTerm, newTerm]\n    );\n\n    return (\n        <Panel\n            isOpen={true}\n            onDismiss={onClose}\n            type={PanelType.medium}\n            headerText={t(\"news.preferencesTitle\")}\n            closeButtonAriaLabel={t(\"news.close\")}\n            isLightDismiss\n            className={styles.panel}\n        >\n            <div className={styles.content}>\n                <p className={styles.description}>{t(\"news.preferencesDescription\")}</p>\n\n                {/* Error Message */}\n                {error && (\n                    <MessageBar messageBarType={MessageBarType.error} onDismiss={() => setError(null)}>\n                        {error}\n                    </MessageBar>\n                )}\n\n                {/* Add New Term */}\n                <div className={styles.addSection}>\n                    <TextField\n                        placeholder={t(\"news.addTermPlaceholder\")}\n                        value={newTerm}\n                        onChange={(_, value) => setNewTerm(value || \"\")}\n                        onKeyPress={handleKeyPress}\n                        disabled={!canAddMore || isAdding}\n                        className={styles.addInput}\n                    />\n                    <PrimaryButton\n                        onClick={handleAddTerm}\n                        disabled={!canAddMore || !newTerm.trim() || isAdding}\n                        className={styles.addButton}\n                    >\n                        <Add24Regular />\n                        {t(\"news.add\")}\n                    </PrimaryButton>\n                </div>\n\n                {/* Terms Counter */}\n                <p className={styles.counter}>\n                    {t(\"news.termsCount\", {\n                        current: preferences.searchTerms.length,\n                        max: preferences.maxTerms\n                    })}\n                </p>\n\n                {/* Terms List */}\n                <div className={styles.termsList}>\n                    {preferences.searchTerms.length === 0 ? (\n                        <p className={styles.emptyMessage}>{t(\"news.noTermsConfigured\")}</p>\n                    ) : (\n                        preferences.searchTerms.map(term => (\n                            <div key={term} className={styles.termItem}>\n                                <span className={styles.termText}>{term}</span>\n                                <IconButton\n                                    iconProps={{ iconName: \"Delete\" }}\n                                    onClick={() => handleDeleteTerm(term)}\n                                    disabled={deletingTerm === term}\n                                    className={styles.deleteButton}\n                                    ariaLabel={t(\"news.deleteTerm\", { term })}\n                                >\n                                    <Delete24Regular />\n                                </IconButton>\n                            </div>\n                        ))\n                    )}\n                </div>\n\n                {/* Info Banner */}\n                <div className={styles.infoBanner}>\n                    <p>{t(\"news.preferencesInfo\")}</p>\n                </div>\n            </div>\n        </Panel>\n    );\n}\n\n","/**\n * News Dashboard page component.\n * Displays personalized news based on user's search terms.\n * News is pre-fetched by a background scheduler and cached for 24 hours.\n */\n\nimport {useCallback, useEffect, useState} from \"react\";\nimport {useNavigate} from \"react-router-dom\";\nimport {Spinner, SpinnerSize} from \"@fluentui/react\";\nimport {\n    ArrowLeft24Regular,\n    ArrowSync24Regular,\n    Info24Regular,\n    News24Regular,\n    Settings24Regular,\n    Warning24Regular\n} from \"@fluentui/react-icons\";\nimport {useMsal} from \"@azure/msal-react\";\nimport {useTranslation} from \"react-i18next\";\n\nimport {getCachedNewsApi, getNewsPreferencesApi} from \"../../api\";\nimport {NewsItem, NewsPreferencesResponse, NewsSearchResult} from \"../../api/models\";\nimport {getToken, useLogin} from \"../../authConfig\";\nimport styles from \"./NewsDashboard.module.css\";\nimport {NewsDetailModal} from \"./NewsDetailModal\";\nimport {NewsInfoDialog} from \"./NewsInfoDialog\";\nimport {NewsPreferencesModal} from \"./NewsPreferencesModal\";\n\n/**\n * Format a timestamp to a readable date string.\n */\nfunction formatDate(timestamp: number | undefined): string {\n    if (!timestamp) return \"\";\n    const date = new Date(timestamp);\n    return date.toLocaleDateString(undefined, {\n        year: \"numeric\",\n        month: \"short\",\n        day: \"numeric\"\n    });\n}\n\n/**\n * Strip Markdown formatting from text for plain text display.\n * Removes common Markdown syntax like bold, italic, links, etc.\n */\nfunction stripMarkdown(text: string): string {\n    if (!text) return \"\";\n    return text\n        // Remove bold/italic markers\n        .replace(/\\*\\*([^*]+)\\*\\*/g, \"$1\")\n        .replace(/\\*([^*]+)\\*/g, \"$1\")\n        .replace(/__([^_]+)__/g, \"$1\")\n        .replace(/_([^_]+)_/g, \"$1\")\n        // Remove inline links [text](url)\n        .replace(/\\[([^\\]]+)\\]\\([^)]+\\)/g, \"$1\")\n        // Remove reference links [text][ref]\n        .replace(/\\[([^\\]]+)\\]\\[[^\\]]*\\]/g, \"$1\")\n        // Remove headers\n        .replace(/^#{1,6}\\s+/gm, \"\")\n        // Remove horizontal rules\n        .replace(/^[-*_]{3,}\\s*$/gm, \"\")\n        // Remove list markers\n        .replace(/^[\\s]*[-*+]\\s+/gm, \"\")\n        .replace(/^[\\s]*\\d+\\.\\s+/gm, \"\")\n        // Remove code blocks\n        .replace(/```[\\s\\S]*?```/g, \"\")\n        .replace(/`([^`]+)`/g, \"$1\")\n        // Remove blockquotes\n        .replace(/^>\\s+/gm, \"\")\n        // Clean up extra whitespace\n        .replace(/\\n{3,}/g, \"\\n\\n\")\n        .trim();\n}\n\n/**\n * News card component for displaying a single news item.\n */\ninterface NewsCardProps {\n    item: NewsItem;\n    onClick: () => void;\n}\n\nfunction NewsCard({item, onClick}: NewsCardProps) {\n    // Strip Markdown formatting for plain text display in cards\n    const plainSummary = stripMarkdown(item.summary);\n\n    return (\n        <article className={styles.newsCard} onClick={onClick} role=\"button\" tabIndex={0}>\n            {item.imageUrl ? (\n                <img src={item.imageUrl} alt={item.title} className={styles.newsCardImage}/>\n            ) : (\n                <div className={styles.newsCardImagePlaceholder}>\n                    <News24Regular/>\n                </div>\n            )}\n            <div className={styles.newsCardContent}>\n                <span className={styles.newsCardSearchTerm}>{item.searchTerm}</span>\n                <h3 className={styles.newsCardTitle}>{item.title}</h3>\n                <p className={styles.newsCardSummary}>{plainSummary}</p>\n                <div className={styles.newsCardFooter}>\n                    <span className={styles.newsCardSource}>{item.source || \"Web\"}</span>\n                    <span className={styles.newsCardDate}>{formatDate(item.publishedAt)}</span>\n                </div>\n            </div>\n        </article>\n    );\n}\n\n/**\n * Main News Dashboard component.\n */\nexport function Component() {\n    const navigate = useNavigate();\n    // Only use MSAL instance if useLogin is true (Azure AD auth)\n    // Otherwise, Beta Auth is used and token is retrieved differently\n    const client = useLogin ? useMsal().instance : undefined;\n    const {t} = useTranslation();\n\n    const [preferences, setPreferences] = useState<NewsPreferencesResponse | null>(null);\n    const [newsResult, setNewsResult] = useState<NewsSearchResult | null>(null);\n    const [isLoading, setIsLoading] = useState(true);\n    const [error, setError] = useState<string | null>(null);\n    const [selectedItem, setSelectedItem] = useState<NewsItem | null>(null);\n    const [showPreferences, setShowPreferences] = useState(false);\n    const [showInfoDialog, setShowInfoDialog] = useState(false);\n\n    /**\n     * Load initial data: preferences and cached news.\n     * News is pre-fetched by background scheduler, so we just display cached data.\n     */\n    const loadInitialData = useCallback(async () => {\n        setIsLoading(true);\n        setError(null);\n\n        try {\n            const token = client ? await getToken(client) : undefined;\n\n            // Load preferences\n            const prefsResponse = await getNewsPreferencesApi(token);\n            setPreferences(prefsResponse);\n\n            // Load cached news if user has search terms\n            if (prefsResponse.searchTerms.length > 0) {\n                const cachedNews = await getCachedNewsApi(token);\n                setNewsResult(cachedNews);\n            }\n        } catch (err) {\n            console.error(\"Error loading news data:\", err);\n            setError(err instanceof Error ? err.message : \"Failed to load news data\");\n        } finally {\n            setIsLoading(false);\n        }\n    }, [client]);\n\n    /**\n     * Handle preferences update.\n     * When new topics are added, the backend triggers a background refresh.\n     * We reload cached news after a short delay to show the new content.\n     */\n    const handlePreferencesUpdate = useCallback(async (newPrefs: NewsPreferencesResponse) => {\n        setPreferences(newPrefs);\n\n        if (newPrefs.searchTerms.length > 0) {\n            // Wait a moment for background refresh to complete, then reload\n            // The backend triggers an async refresh for new topics\n            setTimeout(async () => {\n                try {\n                    const token = client ? await getToken(client) : undefined;\n                    const cachedNews = await getCachedNewsApi(token);\n                    setNewsResult(cachedNews);\n                } catch (err) {\n                    console.error(\"Error reloading cached news:\", err);\n                }\n            }, 3000); // Wait 3 seconds for background refresh\n        } else {\n            setNewsResult(null);\n        }\n    }, [client]);\n\n    // Load data on mount\n    useEffect(() => {\n        loadInitialData();\n    }, [loadInitialData]);\n\n    // Render loading state\n    if (isLoading) {\n        return (\n            <div className={styles.container}>\n                <header className={styles.header}>\n                    <div className={styles.headerLeft}>\n                        <h1 className={styles.title}>{t(\"news.title\")}</h1>\n                        <p className={styles.subtitle}>{t(\"news.subtitle\")}</p>\n                    </div>\n                </header>\n                <div className={styles.content}>\n                    <div className={styles.loadingState}>\n                        <Spinner size={SpinnerSize.large}/>\n                        <p className={styles.loadingText}>{t(\"news.loading\")}</p>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    // Render empty/error state - show friendly message to configure topics\n    if (error || !preferences?.searchTerms.length) {\n        return (\n            <div className={styles.container}>\n                <header className={styles.header}>\n                    <div className={styles.headerLeft}>\n                        <h1 className={styles.title}>{t(\"news.title\")}</h1>\n                        <p className={styles.subtitle}>{t(\"news.subtitle\")}</p>\n                    </div>\n                    <div className={styles.headerActions}>\n                        <button\n                            className={styles.infoButton}\n                            onClick={() => setShowInfoDialog(true)}\n                            title={t(\"news.explainFunction\")}\n                        >\n                            <Info24Regular/>\n                            {t(\"news.explainFunction\")}\n                        </button>\n                        <button className={styles.backButton} onClick={() => navigate(\"/\")}>\n                            <ArrowLeft24Regular/>\n                            {t(\"news.backToChat\")}\n                        </button>\n                    </div>\n                </header>\n                <div className={styles.content}>\n                    <div className={styles.emptyState}>\n                        <News24Regular className={styles.emptyStateIcon}/>\n                        <h2 className={styles.emptyStateTitle}>{t(\"news.emptyTitle\")}</h2>\n                        <p className={styles.emptyStateDescription}>{t(\"news.emptyDescription\")}</p>\n                        <button className={styles.emptyStateButton} onClick={() => setShowPreferences(true)}>\n                            <Settings24Regular/>\n                            {t(\"news.configureTopics\")}\n                        </button>\n                    </div>\n                </div>\n                {showPreferences && (\n                    <NewsPreferencesModal\n                        preferences={preferences || {searchTerms: [], updatedAt: 0, maxTerms: 10}}\n                        onClose={() => setShowPreferences(false)}\n                        onUpdate={handlePreferencesUpdate}\n                    />\n                )}\n                {showInfoDialog && (\n                    <NewsInfoDialog onClose={() => setShowInfoDialog(false)}/>\n                )}\n            </div>\n        );\n    }\n\n    // Render news grid\n    return (\n        <div className={styles.container}>\n            <header className={styles.header}>\n                <div className={styles.headerLeft}>\n                    <h1 className={styles.title}>{t(\"news.title\")}</h1>\n                    <p className={styles.subtitle}>{t(\"news.subtitle\")}</p>\n                </div>\n                <div className={styles.headerActions}>\n                    <button\n                        className={styles.infoButton}\n                        onClick={() => setShowInfoDialog(true)}\n                        title={t(\"news.explainFunction\")}\n                    >\n                        <Info24Regular/>\n                        {t(\"news.explainFunction\")}\n                    </button>\n                    <button className={styles.settingsButton} onClick={() => setShowPreferences(true)}>\n                        <Settings24Regular/>\n                        {t(\"news.settings\")}\n                    </button>\n                    <button className={styles.backButton} onClick={() => navigate(\"/\")}>\n                        <ArrowLeft24Regular/>\n                        {t(\"news.backToChat\")}\n                    </button>\n                </div>\n            </header>\n            <div className={styles.content}>\n                {newsResult?.items.length ? (\n                    <div className={styles.newsGrid}>\n                        {newsResult.items.map(item => (\n                            <NewsCard key={item.id} item={item} onClick={() => setSelectedItem(item)}/>\n                        ))}\n                    </div>\n                ) : (\n                    <div className={styles.emptyState}>\n                        <News24Regular className={styles.emptyStateIcon}/>\n                        <h2 className={styles.emptyStateTitle}>{t(\"news.noNewsTitle\")}</h2>\n                    </div>\n                )}\n            </div>\n\n            {/* Detail Modal */}\n            {selectedItem && (\n                <NewsDetailModal item={selectedItem} onClose={() => setSelectedItem(null)}/>\n            )}\n\n            {/* Preferences Modal */}\n            {showPreferences && preferences && (\n                <NewsPreferencesModal\n                    preferences={preferences}\n                    onClose={() => setShowPreferences(false)}\n                    onUpdate={handlePreferencesUpdate}\n                />\n            )}\n\n            {/* Info Dialog */}\n            {showInfoDialog && (\n                <NewsInfoDialog onClose={() => setShowInfoDialog(false)}/>\n            )}\n        </div>\n    );\n}\n\n"],"names":["formatDate","timestamp","removeHttpLinks","text","cleaned","NewsDetailModal","item","onClose","t","useTranslation","handleKeyDown","useCallback","event","useEffect","jsx","Panel","PanelType","styles","jsxs","News24Regular","ReactMarkdown","remarkGfm","citation","index","Link","topic","NewsInfoDialog","handleOverlayClick","Dismiss24Regular","NewsPreferencesModal","preferences","onUpdate","client","useLogin","useMsal","newTerm","setNewTerm","useState","isAdding","setIsAdding","deletingTerm","setDeletingTerm","error","setError","canAddMore","handleAddTerm","token","getToken","updatedPrefs","addNewsSearchTermApi","err","handleDeleteTerm","term","deleteNewsSearchTermApi","handleKeyPress","MessageBar","MessageBarType","TextField","_","value","PrimaryButton","Add24Regular","IconButton","Delete24Regular","stripMarkdown","NewsCard","onClick","plainSummary","Component","navigate","useNavigate","setPreferences","newsResult","setNewsResult","isLoading","setIsLoading","selectedItem","setSelectedItem","showPreferences","setShowPreferences","showInfoDialog","setShowInfoDialog","loadInitialData","prefsResponse","getNewsPreferencesApi","cachedNews","getCachedNewsApi","handlePreferencesUpdate","newPrefs","Spinner","SpinnerSize","Info24Regular","ArrowLeft24Regular","Settings24Regular"],"mappings":"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"}