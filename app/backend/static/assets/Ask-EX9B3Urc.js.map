{"version":3,"file":"Ask-EX9B3Urc.js","sources":["../../../frontend/src/pages/ask/Ask.tsx"],"sourcesContent":["import { useContext, useEffect, useRef, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Helmet } from \"react-helmet-async\";\nimport { Panel, DefaultButton, Spinner } from \"@fluentui/react\";\n\nimport styles from \"./Ask.module.css\";\n\nimport { askApi, configApi, ChatAppResponse, ChatAppRequest, RetrievalMode, SpeechConfig } from \"../../api\";\nimport { Answer, AnswerError } from \"../../components/Answer\";\nimport { QuestionInput } from \"../../components/QuestionInput\";\nimport { ExampleList } from \"../../components/Example\";\nimport { AnalysisPanel, AnalysisPanelTabs } from \"../../components/AnalysisPanel\";\nimport { SettingsButton } from \"../../components/SettingsButton/SettingsButton\";\nimport { useLogin, getToken, requireAccessControl } from \"../../authConfig\";\nimport { UploadFile } from \"../../components/UploadFile\";\nimport { Settings } from \"../../components/Settings/Settings\";\nimport { useMsal } from \"@azure/msal-react\";\nimport { TokenClaimsDisplay } from \"../../components/TokenClaimsDisplay\";\nimport { LoginContext } from \"../../loginContext\";\nimport { LanguagePicker } from \"../../i18n/LanguagePicker\";\n\nexport function Component(): JSX.Element {\n    const [isConfigPanelOpen, setIsConfigPanelOpen] = useState(false);\n    const [promptTemplate, setPromptTemplate] = useState<string>(\"\");\n    const [promptTemplatePrefix, setPromptTemplatePrefix] = useState<string>(\"\");\n    const [promptTemplateSuffix, setPromptTemplateSuffix] = useState<string>(\"\");\n    const [temperature, setTemperature] = useState<number>(0.3);\n    const [seed, setSeed] = useState<number | null>(null);\n    const [minimumRerankerScore, setMinimumRerankerScore] = useState<number>(1.9);\n    const [minimumSearchScore, setMinimumSearchScore] = useState<number>(0);\n    const [retrievalMode, setRetrievalMode] = useState<RetrievalMode>(RetrievalMode.Hybrid);\n    const [retrieveCount, setRetrieveCount] = useState<number>(3);\n    const [agenticReasoningEffort, setRetrievalReasoningEffort] = useState<string>(\"minimal\");\n    const [useSemanticRanker, setUseSemanticRanker] = useState<boolean>(true);\n    const [useSemanticCaptions, setUseSemanticCaptions] = useState<boolean>(false);\n    const [useQueryRewriting, setUseQueryRewriting] = useState<boolean>(false);\n    const [reasoningEffort, setReasoningEffort] = useState<string>(\"\");\n    const [sendTextSources, setSendTextSources] = useState<boolean>(true);\n    const [sendImageSources, setSendImageSources] = useState<boolean>(false);\n    const [includeCategory, setIncludeCategory] = useState<string>(\"\");\n\n    const [excludeCategory, setExcludeCategory] = useState<string>(\"\");\n    const [question, setQuestion] = useState<string>(\"\");\n    const [searchTextEmbeddings, setSearchTextEmbeddings] = useState<boolean>(true);\n    const [searchImageEmbeddings, setSearchImageEmbeddings] = useState<boolean>(false);\n    const [showMultimodalOptions, setShowMultimodalOptions] = useState<boolean>(false);\n    const [showSemanticRankerOption, setShowSemanticRankerOption] = useState<boolean>(false);\n    const [showQueryRewritingOption, setShowQueryRewritingOption] = useState<boolean>(false);\n    const [showReasoningEffortOption, setShowReasoningEffortOption] = useState<boolean>(false);\n    const [showVectorOption, setShowVectorOption] = useState<boolean>(false);\n    const [showUserUpload, setShowUserUpload] = useState<boolean>(false);\n    const [showLanguagePicker, setshowLanguagePicker] = useState<boolean>(false);\n    const [showSpeechInput, setShowSpeechInput] = useState<boolean>(false);\n    const [showSpeechOutputBrowser, setShowSpeechOutputBrowser] = useState<boolean>(false);\n    const [showSpeechOutputAzure, setShowSpeechOutputAzure] = useState<boolean>(false);\n    const audio = useRef(new Audio()).current;\n    const [isPlaying, setIsPlaying] = useState(false);\n    const [showAgenticRetrievalOption, setShowAgenticRetrievalOption] = useState<boolean>(false);\n    const [webSourceSupported, setWebSourceSupported] = useState<boolean>(false);\n    const [webSourceEnabled, setWebSourceEnabled] = useState<boolean>(false);\n    const [sharePointSourceSupported, setSharePointSourceSupported] = useState<boolean>(false);\n    const [sharePointSourceEnabled, setSharePointSourceEnabled] = useState<boolean>(false);\n    const [useAgenticKnowledgeBase, setUseAgenticRetrieval] = useState<boolean>(false);\n    const [hideMinimalRetrievalReasoningOption, setHideMinimalRetrievalReasoningOption] = useState<boolean>(false);\n\n    const lastQuestionRef = useRef<string>(\"\");\n\n    const [isLoading, setIsLoading] = useState<boolean>(false);\n    const [error, setError] = useState<unknown>();\n    const [answer, setAnswer] = useState<ChatAppResponse>();\n    // For the Ask tab, this array will hold a maximum of one URL\n    const [speechUrls, setSpeechUrls] = useState<(string | null)[]>([]);\n\n    const speechConfig: SpeechConfig = {\n        speechUrls,\n        setSpeechUrls,\n        audio,\n        isPlaying,\n        setIsPlaying\n    };\n\n    const [activeCitation, setActiveCitation] = useState<string>();\n    const [activeAnalysisPanelTab, setActiveAnalysisPanelTab] = useState<AnalysisPanelTabs | undefined>(undefined);\n\n    const client = useLogin ? useMsal().instance : undefined;\n    const { loggedIn } = useContext(LoginContext);\n\n    const getConfig = async () => {\n        configApi().then(config => {\n            setShowMultimodalOptions(config.showMultimodalOptions);\n            if (config.showMultimodalOptions) {\n                // Initialize from server config so defaults follow deployment settings\n                setSendTextSources(config.ragSendTextSources !== undefined ? config.ragSendTextSources : true);\n                setSendImageSources(config.ragSendImageSources);\n                setSearchTextEmbeddings(config.ragSearchTextEmbeddings);\n                setSearchImageEmbeddings(config.ragSearchImageEmbeddings);\n            }\n            setUseSemanticRanker(config.showSemanticRankerOption);\n            setShowSemanticRankerOption(config.showSemanticRankerOption);\n            setUseQueryRewriting(config.showQueryRewritingOption);\n            setShowQueryRewritingOption(config.showQueryRewritingOption);\n            setShowReasoningEffortOption(config.showReasoningEffortOption);\n            if (config.showReasoningEffortOption) {\n                setReasoningEffort(config.defaultReasoningEffort);\n            }\n            setShowVectorOption(config.showVectorOption);\n            if (!config.showVectorOption) {\n                setRetrievalMode(RetrievalMode.Text);\n            }\n            setShowUserUpload(config.showUserUpload);\n            setshowLanguagePicker(config.showLanguagePicker);\n            setShowSpeechInput(config.showSpeechInput);\n            setShowSpeechOutputBrowser(config.showSpeechOutputBrowser);\n            setShowSpeechOutputAzure(config.showSpeechOutputAzure);\n            setShowAgenticRetrievalOption(config.showAgenticRetrievalOption);\n            setUseAgenticRetrieval(config.showAgenticRetrievalOption);\n            setWebSourceSupported(config.webSourceEnabled);\n            setWebSourceEnabled(config.webSourceEnabled);\n            setSharePointSourceSupported(config.sharepointSourceEnabled);\n            setSharePointSourceEnabled(config.sharepointSourceEnabled);\n            if (config.showAgenticRetrievalOption) {\n                setRetrieveCount(10);\n            }\n            const defaultRetrievalEffort = config.defaultRetrievalReasoningEffort ?? \"minimal\";\n            setHideMinimalRetrievalReasoningOption(config.webSourceEnabled);\n            setRetrievalReasoningEffort(defaultRetrievalEffort);\n        });\n    };\n\n    useEffect(() => {\n        getConfig();\n    }, []);\n\n    const makeApiRequest = async (question: string) => {\n        lastQuestionRef.current = question;\n\n        error && setError(undefined);\n        setIsLoading(true);\n        setActiveCitation(undefined);\n        setActiveAnalysisPanelTab(undefined);\n\n        const token = client ? await getToken(client) : undefined;\n\n        try {\n            const request: ChatAppRequest = {\n                messages: [\n                    {\n                        content: question,\n                        role: \"user\"\n                    }\n                ],\n                context: {\n                    overrides: {\n                        prompt_template: promptTemplate.length === 0 ? undefined : promptTemplate,\n                        prompt_template_prefix: promptTemplatePrefix.length === 0 ? undefined : promptTemplatePrefix,\n                        prompt_template_suffix: promptTemplateSuffix.length === 0 ? undefined : promptTemplateSuffix,\n                        include_category: includeCategory.length === 0 ? undefined : includeCategory,\n                        exclude_category: excludeCategory.length === 0 ? undefined : excludeCategory,\n                        top: retrieveCount,\n                        ...(useAgenticKnowledgeBase ? { retrieval_reasoning_effort: agenticReasoningEffort } : {}),\n                        temperature: temperature,\n                        minimum_reranker_score: minimumRerankerScore,\n                        minimum_search_score: minimumSearchScore,\n                        retrieval_mode: retrievalMode,\n                        semantic_ranker: useSemanticRanker,\n                        semantic_captions: useSemanticCaptions,\n                        query_rewriting: useQueryRewriting,\n                        reasoning_effort: reasoningEffort,\n                        search_text_embeddings: searchTextEmbeddings,\n                        search_image_embeddings: searchImageEmbeddings,\n                        send_text_sources: sendTextSources,\n                        send_image_sources: sendImageSources,\n                        language: i18n.language,\n                        use_agentic_knowledgebase: useAgenticKnowledgeBase,\n                        use_web_source: webSourceSupported ? webSourceEnabled : false,\n                        use_sharepoint_source: sharePointSourceSupported ? sharePointSourceEnabled : false,\n                        ...(seed !== null ? { seed: seed } : {})\n                    }\n                },\n                // AI Chat Protocol: Client must pass on any session state received from the server\n                session_state: answer ? answer.session_state : null\n            };\n            const result = await askApi(request, token);\n            setAnswer(result);\n            setSpeechUrls([null]);\n        } catch (e) {\n            setError(e);\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    const handleSettingsChange = (field: string, value: any) => {\n        switch (field) {\n            case \"promptTemplate\":\n                setPromptTemplate(value);\n                break;\n            case \"promptTemplatePrefix\":\n                setPromptTemplatePrefix(value);\n                break;\n            case \"promptTemplateSuffix\":\n                setPromptTemplateSuffix(value);\n                break;\n            case \"temperature\":\n                setTemperature(value);\n                break;\n            case \"seed\":\n                setSeed(value);\n                break;\n            case \"minimumRerankerScore\":\n                setMinimumRerankerScore(value);\n                break;\n            case \"minimumSearchScore\":\n                setMinimumSearchScore(value);\n                break;\n            case \"retrieveCount\":\n                setRetrieveCount(value);\n                break;\n            case \"agenticReasoningEffort\":\n                setRetrievalReasoningEffort(value);\n                if (value === \"minimal\" && webSourceEnabled) {\n                    setWebSourceEnabled(false);\n                    setHideMinimalRetrievalReasoningOption(false);\n                }\n                break;\n            case \"useSemanticRanker\":\n                setUseSemanticRanker(value);\n                break;\n            case \"useSemanticCaptions\":\n                setUseSemanticCaptions(value);\n                break;\n            case \"useQueryRewriting\":\n                setUseQueryRewriting(value);\n                break;\n            case \"reasoningEffort\":\n                setReasoningEffort(value);\n                break;\n            case \"excludeCategory\":\n                setExcludeCategory(value);\n                break;\n            case \"includeCategory\":\n                setIncludeCategory(value);\n                break;\n            case \"llmInputs\":\n                break;\n            case \"sendTextSources\":\n                setSendTextSources(value);\n                break;\n            case \"sendImageSources\":\n                setSendImageSources(value);\n                break;\n            case \"searchTextEmbeddings\":\n                setSearchTextEmbeddings(value);\n                break;\n            case \"searchImageEmbeddings\":\n                setSearchImageEmbeddings(value);\n                break;\n            case \"retrievalMode\":\n                setRetrievalMode(value);\n                break;\n            case \"useAgenticKnowledgeBase\":\n                setUseAgenticRetrieval(value);\n                break;\n            case \"useWebSource\":\n                if (!webSourceSupported) {\n                    setWebSourceEnabled(false);\n                    return;\n                }\n                setWebSourceEnabled(value);\n                setHideMinimalRetrievalReasoningOption(value);\n                break;\n            case \"useSharePointSource\":\n                if (!sharePointSourceSupported) {\n                    setSharePointSourceEnabled(false);\n                    return;\n                }\n                setSharePointSourceEnabled(value);\n                break;\n        }\n    };\n\n    const onExampleClicked = (example: string) => {\n        makeApiRequest(example);\n        setQuestion(example);\n    };\n\n    const onShowCitation = (citation: string) => {\n        if (activeCitation === citation && activeAnalysisPanelTab === AnalysisPanelTabs.CitationTab) {\n            setActiveAnalysisPanelTab(undefined);\n        } else {\n            setActiveCitation(citation);\n            setActiveAnalysisPanelTab(AnalysisPanelTabs.CitationTab);\n        }\n    };\n\n    const onToggleTab = (tab: AnalysisPanelTabs) => {\n        if (activeAnalysisPanelTab === tab) {\n            setActiveAnalysisPanelTab(undefined);\n        } else {\n            setActiveAnalysisPanelTab(tab);\n        }\n    };\n\n    const { t, i18n } = useTranslation();\n\n    return (\n        <div className={styles.askContainer}>\n            {/* Setting the page title using react-helmet-async */}\n            <Helmet>\n                <title>{t(\"pageTitle\")}</title>\n            </Helmet>\n            <div className={styles.askTopSection}>\n                <div className={styles.commandsContainer}>\n                    {showUserUpload && <UploadFile className={styles.commandButton} disabled={!loggedIn} />}\n                    <SettingsButton className={styles.commandButton} onClick={() => setIsConfigPanelOpen(!isConfigPanelOpen)} />\n                </div>\n                <h1 className={styles.askTitle}>{t(\"askTitle\")}</h1>\n                <div className={styles.askQuestionInput}>\n                    <QuestionInput\n                        placeholder={t(\"multimodalExamples.placeholder\")}\n                        disabled={isLoading}\n                        initQuestion={question}\n                        onSend={question => makeApiRequest(question)}\n                        showSpeechInput={showSpeechInput}\n                    />\n                </div>\n            </div>\n            <div className={styles.askBottomSection}>\n                {isLoading && <Spinner label={t(\"generatingAnswer\")} />}\n                {!lastQuestionRef.current && (\n                    <div className={styles.askTopSection}>\n                        {showLanguagePicker && <LanguagePicker onLanguageChange={newLang => i18n.changeLanguage(newLang)} />}\n                        <ExampleList onExampleClicked={onExampleClicked} useMultimodalAnswering={showMultimodalOptions} />\n                    </div>\n                )}\n                {!isLoading && answer && !error && (\n                    <div className={styles.askAnswerContainer}>\n                        <Answer\n                            answer={answer}\n                            index={0}\n                            speechConfig={speechConfig}\n                            isStreaming={false}\n                            onCitationClicked={x => onShowCitation(x)}\n                            onThoughtProcessClicked={() => onToggleTab(AnalysisPanelTabs.ThoughtProcessTab)}\n                            onSupportingContentClicked={() => onToggleTab(AnalysisPanelTabs.SupportingContentTab)}\n                            showSpeechOutputAzure={showSpeechOutputAzure}\n                            showSpeechOutputBrowser={showSpeechOutputBrowser}\n                        />\n                    </div>\n                )}\n                {error ? (\n                    <div className={styles.askAnswerContainer}>\n                        <AnswerError error={error.toString()} onRetry={() => makeApiRequest(lastQuestionRef.current)} />\n                    </div>\n                ) : null}\n                {activeAnalysisPanelTab && answer && (\n                    <AnalysisPanel\n                        className={styles.askAnalysisPanel}\n                        activeCitation={activeCitation}\n                        onActiveTabChanged={x => onToggleTab(x)}\n                        citationHeight=\"600px\"\n                        answer={answer}\n                        activeTab={activeAnalysisPanelTab}\n                        onCitationClicked={onShowCitation}\n                    />\n                )}\n            </div>\n\n            <Panel\n                headerText={t(\"labels.headerText\")}\n                isOpen={isConfigPanelOpen}\n                isBlocking={false}\n                onDismiss={() => setIsConfigPanelOpen(false)}\n                closeButtonAriaLabel={t(\"labels.closeButton\")}\n                onRenderFooterContent={() => <DefaultButton onClick={() => setIsConfigPanelOpen(false)}>{t(\"labels.closeButton\")}</DefaultButton>}\n                isFooterAtBottom={true}\n            >\n                <Settings\n                    promptTemplate={promptTemplate}\n                    promptTemplatePrefix={promptTemplatePrefix}\n                    promptTemplateSuffix={promptTemplateSuffix}\n                    temperature={temperature}\n                    retrieveCount={retrieveCount}\n                    agenticReasoningEffort={agenticReasoningEffort}\n                    seed={seed}\n                    minimumSearchScore={minimumSearchScore}\n                    minimumRerankerScore={minimumRerankerScore}\n                    useSemanticRanker={useSemanticRanker}\n                    useSemanticCaptions={useSemanticCaptions}\n                    useQueryRewriting={useQueryRewriting}\n                    reasoningEffort={reasoningEffort}\n                    excludeCategory={excludeCategory}\n                    includeCategory={includeCategory}\n                    retrievalMode={retrievalMode}\n                    sendTextSources={sendTextSources}\n                    sendImageSources={sendImageSources}\n                    searchTextEmbeddings={searchTextEmbeddings}\n                    searchImageEmbeddings={searchImageEmbeddings}\n                    showSemanticRankerOption={showSemanticRankerOption}\n                    showQueryRewritingOption={showQueryRewritingOption}\n                    showReasoningEffortOption={showReasoningEffortOption}\n                    showMultimodalOptions={showMultimodalOptions}\n                    showVectorOption={showVectorOption}\n                    useLogin={!!useLogin}\n                    loggedIn={loggedIn}\n                    requireAccessControl={requireAccessControl}\n                    showAgenticRetrievalOption={showAgenticRetrievalOption}\n                    useAgenticKnowledgeBase={useAgenticKnowledgeBase}\n                    useWebSource={webSourceEnabled}\n                    showWebSourceOption={webSourceSupported}\n                    useSharePointSource={sharePointSourceEnabled}\n                    showSharePointSourceOption={sharePointSourceSupported}\n                    hideMinimalRetrievalReasoningOption={hideMinimalRetrievalReasoningOption}\n                    onChange={handleSettingsChange}\n                />\n                {useLogin && <TokenClaimsDisplay />}\n            </Panel>\n        </div>\n    );\n}\n\nComponent.displayName = \"Ask\";\n"],"names":["Component","isConfigPanelOpen","setIsConfigPanelOpen","useState","promptTemplate","setPromptTemplate","promptTemplatePrefix","setPromptTemplatePrefix","promptTemplateSuffix","setPromptTemplateSuffix","temperature","setTemperature","seed","setSeed","minimumRerankerScore","setMinimumRerankerScore","minimumSearchScore","setMinimumSearchScore","retrievalMode","setRetrievalMode","RetrievalMode","retrieveCount","setRetrieveCount","agenticReasoningEffort","setRetrievalReasoningEffort","useSemanticRanker","setUseSemanticRanker","useSemanticCaptions","setUseSemanticCaptions","useQueryRewriting","setUseQueryRewriting","reasoningEffort","setReasoningEffort","sendTextSources","setSendTextSources","sendImageSources","setSendImageSources","includeCategory","setIncludeCategory","excludeCategory","setExcludeCategory","question","setQuestion","searchTextEmbeddings","setSearchTextEmbeddings","searchImageEmbeddings","setSearchImageEmbeddings","showMultimodalOptions","setShowMultimodalOptions","showSemanticRankerOption","setShowSemanticRankerOption","showQueryRewritingOption","setShowQueryRewritingOption","showReasoningEffortOption","setShowReasoningEffortOption","showVectorOption","setShowVectorOption","showUserUpload","setShowUserUpload","showLanguagePicker","setshowLanguagePicker","showSpeechInput","setShowSpeechInput","showSpeechOutputBrowser","setShowSpeechOutputBrowser","showSpeechOutputAzure","setShowSpeechOutputAzure","audio","useRef","isPlaying","setIsPlaying","showAgenticRetrievalOption","setShowAgenticRetrievalOption","webSourceSupported","setWebSourceSupported","webSourceEnabled","setWebSourceEnabled","sharePointSourceSupported","setSharePointSourceSupported","sharePointSourceEnabled","setSharePointSourceEnabled","useAgenticKnowledgeBase","setUseAgenticRetrieval","hideMinimalRetrievalReasoningOption","setHideMinimalRetrievalReasoningOption","lastQuestionRef","isLoading","setIsLoading","error","setError","answer","setAnswer","speechUrls","setSpeechUrls","speechConfig","activeCitation","setActiveCitation","activeAnalysisPanelTab","setActiveAnalysisPanelTab","client","useLogin","useMsal","loggedIn","useContext","LoginContext","getConfig","configApi","config","defaultRetrievalEffort","useEffect","makeApiRequest","token","getToken","request","i18n","result","askApi","e","handleSettingsChange","field","value","onExampleClicked","example","onShowCitation","citation","AnalysisPanelTabs","onToggleTab","tab","t","useTranslation","jsxs","styles","jsx","Helmet","UploadFile","SettingsButton","QuestionInput","Spinner","LanguagePicker","newLang","ExampleList","Answer","x","AnswerError","AnalysisPanel","Panel","DefaultButton","Settings","requireAccessControl","TokenClaimsDisplay"],"mappings":"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"}